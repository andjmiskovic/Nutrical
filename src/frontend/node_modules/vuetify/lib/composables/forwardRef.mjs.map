{"version":3,"file":"forwardRef.mjs","names":["useForwardRef","target","refs","Proxy","get","key","Reflect","has","ref","value","val","bind","getOwnPropertyDescriptor","descriptor","obj","Object","getPrototypeOf","undefined"],"sources":["../../src/composables/forwardRef.ts"],"sourcesContent":["import type { Ref, UnwrapRef } from 'vue'\nimport type { UnionToIntersection } from '@/util'\n\nexport function useForwardRef<T extends {}, U extends Ref<{} | undefined>[]> (\n  target: T,\n  ...refs: U\n): T & UnwrapRef<UnionToIntersection<U[number]>> {\n  return new Proxy(target, {\n    get (target, key) {\n      if (Reflect.has(target, key)) {\n        return Reflect.get(target, key)\n      }\n      for (const ref of refs) {\n        if (ref.value && Reflect.has(ref.value, key)) {\n          const val = Reflect.get(ref.value, key)\n          return typeof val === 'function'\n            ? val.bind(ref.value)\n            : val\n        }\n      }\n    },\n    getOwnPropertyDescriptor (target, key) {\n      const descriptor = Reflect.getOwnPropertyDescriptor(target, key)\n      if (descriptor) return descriptor\n\n      // Check each ref's own properties\n      for (const ref of refs) {\n        if (!ref.value) continue\n        const descriptor = Reflect.getOwnPropertyDescriptor(ref.value, key)\n        if (descriptor) return descriptor\n      }\n      // Recursive search up each ref's prototype\n      for (const ref of refs) {\n        let obj = ref.value && Object.getPrototypeOf(ref.value)\n        while (obj) {\n          const descriptor = Reflect.getOwnPropertyDescriptor(obj, key)\n          if (descriptor) return descriptor\n          obj = Object.getPrototypeOf(obj)\n        }\n      }\n      return undefined\n    },\n  }) as any\n}\n"],"mappings":"AAGA,OAAO,SAASA,aAAT,CACLC,MADK,EAG0C;EAAA,kCAD5CC,IAC4C;IAD5CA,IAC4C;EAAA;;EAC/C,OAAO,IAAIC,KAAJ,CAAUF,MAAV,EAAkB;IACvBG,GAAG,CAAEH,MAAF,EAAUI,GAAV,EAAe;MAChB,IAAIC,OAAO,CAACC,GAAR,CAAYN,MAAZ,EAAoBI,GAApB,CAAJ,EAA8B;QAC5B,OAAOC,OAAO,CAACF,GAAR,CAAYH,MAAZ,EAAoBI,GAApB,CAAP;MACD;;MACD,KAAK,MAAMG,GAAX,IAAkBN,IAAlB,EAAwB;QACtB,IAAIM,GAAG,CAACC,KAAJ,IAAaH,OAAO,CAACC,GAAR,CAAYC,GAAG,CAACC,KAAhB,EAAuBJ,GAAvB,CAAjB,EAA8C;UAC5C,MAAMK,GAAG,GAAGJ,OAAO,CAACF,GAAR,CAAYI,GAAG,CAACC,KAAhB,EAAuBJ,GAAvB,CAAZ;UACA,OAAO,OAAOK,GAAP,KAAe,UAAf,GACHA,GAAG,CAACC,IAAJ,CAASH,GAAG,CAACC,KAAb,CADG,GAEHC,GAFJ;QAGD;MACF;IACF,CAbsB;;IAcvBE,wBAAwB,CAAEX,MAAF,EAAUI,GAAV,EAAe;MACrC,MAAMQ,UAAU,GAAGP,OAAO,CAACM,wBAAR,CAAiCX,MAAjC,EAAyCI,GAAzC,CAAnB;MACA,IAAIQ,UAAJ,EAAgB,OAAOA,UAAP,CAFqB,CAIrC;;MACA,KAAK,MAAML,GAAX,IAAkBN,IAAlB,EAAwB;QACtB,IAAI,CAACM,GAAG,CAACC,KAAT,EAAgB;QAChB,MAAMI,UAAU,GAAGP,OAAO,CAACM,wBAAR,CAAiCJ,GAAG,CAACC,KAArC,EAA4CJ,GAA5C,CAAnB;QACA,IAAIQ,UAAJ,EAAgB,OAAOA,UAAP;MACjB,CAToC,CAUrC;;;MACA,KAAK,MAAML,GAAX,IAAkBN,IAAlB,EAAwB;QACtB,IAAIY,GAAG,GAAGN,GAAG,CAACC,KAAJ,IAAaM,MAAM,CAACC,cAAP,CAAsBR,GAAG,CAACC,KAA1B,CAAvB;;QACA,OAAOK,GAAP,EAAY;UACV,MAAMD,UAAU,GAAGP,OAAO,CAACM,wBAAR,CAAiCE,GAAjC,EAAsCT,GAAtC,CAAnB;UACA,IAAIQ,UAAJ,EAAgB,OAAOA,UAAP;UAChBC,GAAG,GAAGC,MAAM,CAACC,cAAP,CAAsBF,GAAtB,CAAN;QACD;MACF;;MACD,OAAOG,SAAP;IACD;;EAlCsB,CAAlB,CAAP;AAoCD"}
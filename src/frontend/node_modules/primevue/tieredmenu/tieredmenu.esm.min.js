import{DomHandler as e,ZIndexUtils as t,ConnectedOverlayScrollHandler as i}from"primevue/utils";import n from"primevue/overlayeventbus";import l from"primevue/portal";import s from"primevue/ripple";import{resolveComponent as r,resolveDirective as a,openBlock as o,createElementBlock as c,normalizeClass as d,Fragment as u,renderList as m,normalizeStyle as p,createBlock as h,withCtx as v,withDirectives as b,createElementVNode as f,toDisplayString as k,createCommentVNode as y,resolveDynamicComponent as C,createVNode as L,Transition as g,mergeProps as x}from"vue";var I={name:"TieredMenuSub",emits:["leaf-click","keydown-item"],props:{model:{type:Array,default:null},root:{type:Boolean,default:!1},popup:{type:Boolean,default:!1},parentActive:{type:Boolean,default:!1},template:{type:Function,default:null},exact:{type:Boolean,default:!0}},documentClickListener:null,watch:{parentActive(e){e||(this.activeItem=null)}},data:()=>({activeItem:null}),updated(){this.root&&this.activeItem&&this.bindDocumentClickListener()},beforeUnmount(){this.unbindDocumentClickListener()},methods:{onItemMouseEnter(e,t){this.disabled(t)?e.preventDefault():this.root?(this.activeItem||this.popup)&&(this.activeItem=t):this.activeItem=t},onItemClick(e,t,i){this.disabled(t)?e.preventDefault():(t.command&&t.command({originalEvent:e,item:t}),t.items&&(this.activeItem&&t===this.activeItem?this.activeItem=null:this.activeItem=t),t.items||this.onLeafClick(),t.to&&i&&i(e))},onLeafClick(){this.activeItem=null,this.$emit("leaf-click")},onItemKeyDown(e,t){let i=e.currentTarget.parentElement;switch(e.which){case 40:var n=this.findNextItem(i);n&&n.children[0].focus(),e.preventDefault();break;case 38:var l=this.findPrevItem(i);l&&l.children[0].focus(),e.preventDefault();break;case 39:t.items&&(this.activeItem=t,setTimeout((()=>{i.children[1].children[0].children[0].focus()}),50)),e.preventDefault()}this.$emit("keydown-item",{originalEvent:e,element:i})},onChildItemKeyDown(e){37===e.originalEvent.which&&(this.activeItem=null,e.element.parentElement.previousElementSibling.focus())},findNextItem(t){let i=t.nextElementSibling;return i?e.hasClass(i,"p-disabled")||!e.hasClass(i,"p-menuitem")?this.findNextItem(i):i:null},findPrevItem(t){let i=t.previousElementSibling;return i?e.hasClass(i,"p-disabled")||!e.hasClass(i,"p-menuitem")?this.findPrevItem(i):i:null},getItemClass(e){return["p-menuitem",e.class,{"p-menuitem-active":this.activeItem===e}]},linkClass(e,t){return["p-menuitem-link",{"p-disabled":this.disabled(e),"router-link-active":t&&t.isActive,"router-link-active-exact":this.exact&&t&&t.isExactActive}]},bindDocumentClickListener(){this.documentClickListener||(this.documentClickListener=e=>{this.$el&&!this.$el.contains(e.target)&&(this.activeItem=null,this.unbindDocumentClickListener())},document.addEventListener("click",this.documentClickListener))},unbindDocumentClickListener(){this.documentClickListener&&(document.removeEventListener("click",this.documentClickListener),this.documentClickListener=null)},visible:e=>"function"==typeof e.visible?e.visible():!1!==e.visible,disabled:e=>"function"==typeof e.disabled?e.disabled():e.disabled,label:e=>"function"==typeof e.label?e.label():e.label},computed:{containerClass(){return{"p-submenu-list":!this.root}}},directives:{ripple:s}};const w=["onMouseenter"],E=["href","onClick","onKeydown"],S={class:"p-menuitem-text"},A=["href","target","aria-haspopup","aria-expanded","onClick","onKeydown","tabindex"],T={class:"p-menuitem-text"},z={key:0,class:"p-submenu-icon pi pi-angle-right"};I.render=function(e,t,i,n,l,s){const L=r("router-link"),g=r("TieredMenuSub",!0),x=a("ripple");return o(),c("ul",{ref:"element",class:d(s.containerClass),role:"'menubar' : 'menu'","aria-orientation":"horizontal"},[(o(!0),c(u,null,m(i.model,((e,t)=>(o(),c(u,{key:s.label(e)+t.toString()},[s.visible(e)&&!e.separator?(o(),c("li",{key:0,class:d(s.getItemClass(e)),style:p(e.style),onMouseenter:t=>s.onItemMouseEnter(t,e),role:"none"},[i.template?(o(),h(C(i.template),{key:1,item:e},null,8,["item"])):(o(),c(u,{key:0},[e.to&&!s.disabled(e)?(o(),h(L,{key:0,to:e.to,custom:""},{default:v((({navigate:t,href:i,isActive:n,isExactActive:l})=>[b((o(),c("a",{href:i,onClick:i=>s.onItemClick(i,e,t),class:d(s.linkClass(e,{isActive:n,isExactActive:l})),onKeydown:t=>s.onItemKeyDown(t,e),role:"menuitem"},[f("span",{class:d(["p-menuitem-icon",e.icon])},null,2),f("span",S,k(s.label(e)),1)],42,E)),[[x]])])),_:2},1032,["to"])):b((o(),c("a",{key:1,href:e.url,class:d(s.linkClass(e)),target:e.target,"aria-haspopup":null!=e.items,"aria-expanded":e===l.activeItem,onClick:t=>s.onItemClick(t,e),onKeydown:t=>s.onItemKeyDown(t,e),role:"menuitem",tabindex:s.disabled(e)?null:"0"},[f("span",{class:d(["p-menuitem-icon",e.icon])},null,2),f("span",T,k(s.label(e)),1),e.items?(o(),c("span",z)):y("",!0)],42,A)),[[x]])],64)),s.visible(e)&&e.items?(o(),h(g,{model:e.items,key:s.label(e)+"_sub_",template:i.template,onLeafClick:s.onLeafClick,onKeydownItem:s.onChildItemKeyDown,parentActive:e===l.activeItem,exact:i.exact},null,8,["model","template","onLeafClick","onKeydownItem","parentActive","exact"])):y("",!0)],46,w)):y("",!0),s.visible(e)&&e.separator?(o(),c("li",{class:d(["p-menu-separator",e.class]),style:p(e.style),key:"separator"+t.toString(),role:"separator"},null,6)):y("",!0)],64)))),128))],2)};var D={name:"TieredMenu",inheritAttrs:!1,props:{popup:{type:Boolean,default:!1},model:{type:Array,default:null},appendTo:{type:String,default:"body"},autoZIndex:{type:Boolean,default:!0},baseZIndex:{type:Number,default:0},exact:{type:Boolean,default:!0}},target:null,container:null,outsideClickListener:null,scrollHandler:null,resizeListener:null,data:()=>({visible:!1}),beforeUnmount(){this.unbindResizeListener(),this.unbindOutsideClickListener(),this.scrollHandler&&(this.scrollHandler.destroy(),this.scrollHandler=null),this.target=null,this.container&&this.autoZIndex&&t.clear(this.container),this.container=null},methods:{itemClick(e){const t=e.item;t.command&&(t.command(e),e.originalEvent.preventDefault()),this.hide()},toggle(e){this.visible?this.hide():this.show(e)},show(e){this.visible=!0,this.target=e.currentTarget},hide(){this.visible=!1},onEnter(e){this.alignOverlay(),this.bindOutsideClickListener(),this.bindResizeListener(),this.bindScrollListener(),this.autoZIndex&&t.set("menu",e,this.baseZIndex+this.$primevue.config.zIndex.menu)},onLeave(){this.unbindOutsideClickListener(),this.unbindResizeListener(),this.unbindScrollListener()},onAfterLeave(e){this.autoZIndex&&t.clear(e)},alignOverlay(){e.absolutePosition(this.container,this.target),this.container.style.minWidth=e.getOuterWidth(this.target)+"px"},bindOutsideClickListener(){this.outsideClickListener||(this.outsideClickListener=e=>{this.visible&&this.container&&!this.container.contains(e.target)&&!this.isTargetClicked(e)&&this.hide()},document.addEventListener("click",this.outsideClickListener))},unbindOutsideClickListener(){this.outsideClickListener&&(document.removeEventListener("click",this.outsideClickListener),this.outsideClickListener=null)},bindScrollListener(){this.scrollHandler||(this.scrollHandler=new i(this.target,(()=>{this.visible&&this.hide()}))),this.scrollHandler.bindScrollListener()},unbindScrollListener(){this.scrollHandler&&this.scrollHandler.unbindScrollListener()},bindResizeListener(){this.resizeListener||(this.resizeListener=()=>{this.visible&&!e.isTouchDevice()&&this.hide()},window.addEventListener("resize",this.resizeListener))},unbindResizeListener(){this.resizeListener&&(window.removeEventListener("resize",this.resizeListener),this.resizeListener=null)},isTargetClicked(e){return this.target&&(this.target===e.target||this.target.contains(e.target))},onLeafClick(){this.popup&&this.hide()},containerRef(e){this.container=e},onOverlayClick(e){n.emit("overlay-click",{originalEvent:e,target:this.target})}},computed:{containerClass(){return["p-tieredmenu p-component",{"p-tieredmenu-overlay":this.popup,"p-input-filled":"filled"===this.$primevue.config.inputStyle,"p-ripple-disabled":!1===this.$primevue.config.ripple}]}},components:{TieredMenuSub:I,Portal:l}};!function(e,t){void 0===t&&(t={});var i=t.insertAt;if(e&&"undefined"!=typeof document){var n=document.head||document.getElementsByTagName("head")[0],l=document.createElement("style");l.type="text/css","top"===i&&n.firstChild?n.insertBefore(l,n.firstChild):n.appendChild(l),l.styleSheet?l.styleSheet.cssText=e:l.appendChild(document.createTextNode(e))}}("\n.p-tieredmenu-overlay {\n    position: absolute;\n    top: 0;\n    left: 0;\n}\n.p-tieredmenu ul {\n    margin: 0;\n    padding: 0;\n    list-style: none;\n}\n.p-tieredmenu .p-submenu-list {\n    position: absolute;\n    min-width: 100%;\n    z-index: 1;\n    display: none;\n}\n.p-tieredmenu .p-menuitem-link {\n    cursor: pointer;\n    display: -webkit-box;\n    display: -ms-flexbox;\n    display: flex;\n    -webkit-box-align: center;\n        -ms-flex-align: center;\n            align-items: center;\n    text-decoration: none;\n    overflow: hidden;\n    position: relative;\n}\n.p-tieredmenu .p-menuitem-text {\n    line-height: 1;\n}\n.p-tieredmenu .p-menuitem {\n    position: relative;\n}\n.p-tieredmenu .p-menuitem-link .p-submenu-icon {\n    margin-left: auto;\n}\n.p-tieredmenu .p-menuitem-active > .p-submenu-list {\n    display: block;\n    left: 100%;\n    top: 0;\n}\n"),D.render=function(e,t,i,n,l,s){const a=r("TieredMenuSub"),d=r("Portal");return o(),h(d,{appendTo:i.appendTo,disabled:!i.popup},{default:v((()=>[L(g,{name:"p-connected-overlay",onEnter:s.onEnter,onLeave:s.onLeave,onAfterLeave:s.onAfterLeave},{default:v((()=>[!i.popup||l.visible?(o(),c("div",x({key:0,ref:s.containerRef,class:s.containerClass},e.$attrs,{onClick:t[0]||(t[0]=(...e)=>s.onOverlayClick&&s.onOverlayClick(...e))}),[L(a,{model:i.model,root:!0,popup:i.popup,onLeafClick:s.onLeafClick,template:e.$slots.item,exact:i.exact},null,8,["model","popup","onLeafClick","template","exact"])],16)):y("",!0)])),_:1},8,["onEnter","onLeave","onAfterLeave"])])),_:1},8,["appendTo","disabled"])};export{D as default};
